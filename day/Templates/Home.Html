{% extends "base.html" %}
{% load static %}

{% block content %}
    <!-- Original content remains unchanged -->
    <section class="hero">
        <div class="hero-content">
            <h1>Get the best quality medicines for you and your loved ones</h1>
            <p>Shop by category or search for a specific</p>
            
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search for a medicine, wellness product or health...">
                <button class="search-button" style="color: white; background-color: #007BFF;">Search</button>
            </div>
        </div>
        
        <div class="hero-image">
            <img src="{% static 'img/ho.png' %}" width="500px" alt="Person on wheelchair using laptop">
        </div>
    </section>

    <section class="categories">
        <h2>Categories</h2>
        
        <div class="category-grid">
            <a href="/details/1/">
                <div class="category-card">
                    <h3>Prescription Medicines</h3>
                    <div class="category-icon"  style="background-image: url('/static/img/prox.png'); height: 200px; background-size: cover;"></div>
                </div>
            </a>
    
            <a href="/details/2/">
                <div class="category-card">
                    <h3>Over-the-Counter (OTC) Medicines</h3>
                    <div class="category-icon"  style="background-image: url('/static/img/t.png'); height: 200px; background-size: cover;"></div>
                </div>
            </a>
    
            <a href="/details/3/">
                <div class="category-card">
                    <h3>First Aid & Wound Care</h3>
                    <div class="category-icon"  style="background-image: url('/static/img/fd.png'); height: 200px; background-size: cover;"></div>
                </div>
            </a>
    
            <a href="/details/4/">
                <div class="category-card">
                    <h3>Medical Devices & Equipment</h3>
                    <div class="category-icon"  style="background-image: url('/static/img/pro.png'); height: 200px; background-size: cover;"></div>
                </div>
            </a>
    
            <a href="/details/5/">
                <div class="category-card">
                    <h3>Personal Protection & Hygiene</h3>
                    <div class="category-icon" style="background-image: url('/static/img/pp.png'); height: 200px; background-size: cover;"></div>
                </div>
            </a>
    
            <a href="/details/6/">
                <div class="category-card">
                    <h3>Diabetes & Health Monitoring</h3>
                    <div class="category-icon" style="background-image: url('/static/img/ok.png'); height: 200px; background-size: cover; background-position: center;"></div>
                </div>
            </a>
        </div>
    </section>
    
    <div class="container" id="abt">
        <h1 class="title">About Us</h1>

        <div class="benefits-section">
            <div class="content">
                <h2 class="benefits-heading">All your Medical<br>Disposable Devices needs<br>in one place</h2>
                <ul class="benefits-list">
                    <li>Search and find all kind of drugs</li>
                    <li>We have drugs for special case treatments</li>
                    <li>Get notified when your drug is available</li>
                </ul>
                <a href="#" class="get-prescription">Get prescription</a>
            </div>
            <div class="illustration">
                <img src="{% static 'img/1.png' %}" alt="">
            </div>
        </div>

        <div class="benefits-section">
            <div class="content">
                <h2 class="benefits-heading">Get your essentials on<br>time !</h2>
                <ul class="benefits-list">
                    <li>Get straight delivery to your doorstep</li>
                    <li>We deliver within 24hrs of request</li>
                    <li>We guarantee speedfly response</li>
                </ul>
                <a href="#" class="get-prescription">Get prescription</a>
            </div>
            <div class="illustration">
                <img src="{% static 'img/2.png' %}" alt="">
            </div>
        </div>

        <div class="benefits-section">
            <div class="content">
                <h2 class="benefits-heading">Made by Doctors ,<br>Made for Doctors</h2>
                <ul class="benefits-list">
                    <li>When you are a member your refill is easier</li>
                    <li>With one click your medicine is on it's way</li>
                    <li>Select a health care specialist</li>
                </ul>
                <a href="#" class="get-prescription">Get prescription</a>
            </div>
            <div class="illustration">
                <img src="{% static 'img/3.png' %}" alt="Delivery illustration">
            </div>
        </div>
    </div>

    <!-- Floating Button with Skull -->
    <div id="theme-toggle-btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="skull-icon">
            <path fill="currentColor" d="M12,2A9,9 0 0,0 3,11C3,14.03 4.53,16.82 7,18.47V22H9V19H11V22H13V19H15V22H17V18.46C19.47,16.81 21,14.03 21,11A9,9 0 0,0 12,2M8,11A2,2 0 0,1 10,13A2,2 0 0,1 8,15A2,2 0 0,1 6,13A2,2 0 0,1 8,11M16,11A2,2 0 0,1 18,13A2,2 0 0,1 16,15A2,2 0 0,1 14,13A2,2 0 0,1 16,11M12,14L13.5,17H10.5L12,14Z" />
        </svg>
    </div>

    <!-- Medicine List Popup -->
    <div id="medicine-popup" class="popup-overlay">
        <div class="popup-content">
            <div class="popup-header">
                <h3>Featured Medicines</h3>
                <span class="close-popup">&times;</span>
            </div>
            <div class="popup-body">
                <div class="medicine-list">
                    <div class="medicine-item">
                        <div class="medicine-icon">ðŸ’Š</div>
                        <div class="medicine-details">
                            <h4>Paracetamol 500mg</h4>
                            <p>Fever & Pain Relief</p>
                            <span class="medicine-price">Rs.200.00</span>
                        </div>
                        <button class="add-to-cart">Add</button>
                    </div>
                    
                    <div class="medicine-item">
                        <div class="medicine-icon">ðŸ’Š</div>
                        <div class="medicine-details">
                            <h4>Amoxicillin 250mg</h4>
                            <p>Antibiotic</p>
                            <span class="medicine-price">Rs.350.00</span>
                        </div>
                        <button class="add-to-cart">Add</button>
                    </div>
                    
                    <div class="medicine-item">
                        <div class="medicine-icon">ðŸ’Š</div>
                        <div class="medicine-details">
                            <h4>Cetirizine 10mg</h4>
                            <p>Allergy Relief</p>
                            <span class="medicine-price">Rs.420.00</span>
                        </div>
                        <button class="add-to-cart">Add</button>
                    </div>
                    
                    <div class="medicine-item">
                        <div class="medicine-icon">ðŸ’Š</div>
                        <div class="medicine-details">
                            <h4>Omeprazole 20mg</h4>
                            <p>Acid Reflux</p>
                            <span class="medicine-price">Rs.320.00</span>
                        </div>
                        <button class="add-to-cart">Add</button>
                    </div>
                    
                    
                </div>
            </div>
            <div class="popup-footer">
                <button id="view-cart">View Cart</button>
                <button id="close-popup">Close</button>
            </div>
        </div>
    </div>

    <style>
        /* Floating Button Styles */
        #theme-toggle-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background-color: #007BFF;
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        #theme-toggle-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .skull-icon {
            width: 32px;
            height: 32px;
        }

        /* Popup Styles */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .popup-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .popup-content {
            background-color: white;
            width: 90%;
            max-width: 500px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transform: translateY(20px);
            transition: transform 0.3s ease;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
        }

        .popup-overlay.active .popup-content {
            transform: translateY(0);
        }

        .popup-header {
            background-color: #007BFF;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .popup-header h3 {
            margin: 0;
            font-size: 18px;
        }

        .close-popup {
            font-size: 24px;
            cursor: pointer;
        }

        .popup-body {
            padding: 20px;
            overflow-y: auto;
            flex: 1;
        }

        /* Medicine List Styles */
        .medicine-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .medicine-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 1px solid #eee;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .medicine-item:hover {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-color: #ddd;
        }

        .medicine-icon {
            font-size: 24px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .medicine-details {
            flex: 1;
        }

        .medicine-details h4 {
            margin: 0 0 5px 0;
            font-size: 16px;
            color: #333;
        }

        .medicine-details p {
            margin: 0 0 5px 0;
            font-size: 14px;
            color: #666;
        }

        .medicine-price {
            font-weight: bold;
            color: #007BFF;
        }

        .add-to-cart {
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .add-to-cart:hover {
            background-color: #0069d9;
        }

        .popup-footer {
            padding: 15px 20px;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            border-top: 1px solid #eee;
        }

        .popup-footer button {
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        #close-popup {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            color: #333;
        }

        #view-cart {
            background-color: #007BFF;
            border: none;
            color: white;
        }

        #close-popup:hover {
            background-color: #eee;
        }

        #view-cart:hover {
            background-color: #0069d9;
        }

        /* Red Theme Classes */
        body.red-theme {
            background-color: #ffebee !important;
        }

        .red-theme header {
            background-color: #c62828 !important;
        }

        .red-theme .logo,
        .red-theme nav ul li a,
        .red-theme .header-right i {
            color: white !important;
        }

        .red-theme .hero-content h1,
        .red-theme .categories h2,
        .red-theme .category-card h3,
        .red-theme .title,
        .red-theme .benefits-heading {
            color: #d32f2f !important;
        }

        .red-theme .search-button,
        .red-theme #theme-toggle-btn,
        .red-theme .popup-header,
        .red-theme .add-to-cart,
        .red-theme #view-cart {
            background-color: #b71c1c !important;
        }

        .red-theme .footer {
            background-color: #c62828 !important;
        }

        .red-theme .benefits-list li::before {
            color: #d32f2f !important;
        }

        .red-theme .get-prescription {
            border-color: #d32f2f !important;
            color: #d32f2f !important;
        }

        .red-theme .get-prescription:hover {
            background-color: #d32f2f !important;
            color: white !important;
        }

        .red-theme .category-card {
            background-color: #ffcdd2 !important;
        }

        .red-theme .title::after {
            background-color: #d32f2f !important;
        }

        .red-theme .medicine-price {
            color: #d32f2f !important;
        }

        .red-theme .add-to-cart:hover,
        .red-theme #view-cart:hover {
            background-color: #d32f2f !important;
        }

        /* When in red theme, rotate the skull */
        .red-theme #theme-toggle-btn .skull-icon {
            transform: rotate(180deg);
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggleBtn = document.getElementById('theme-toggle-btn');
            const medicinePopup = document.getElementById('medicine-popup');
            const closePopupBtn = document.querySelector('.close-popup');
            const closePopupButton = document.getElementById('close-popup');
            const viewCartBtn = document.getElementById('view-cart');
            const addToCartBtns = document.querySelectorAll('.add-to-cart');
            const body = document.body;
            
            // Check if theme preference is stored in localStorage
            const currentTheme = localStorage.getItem('theme');
            if (currentTheme === 'red') {
                body.classList.add('red-theme');
            }
        
            // Show popup when clicking the skull button
            themeToggleBtn.addEventListener('click', function() {
                // Toggle theme when clicking the skull button (changed from dblclick)
                if (body.classList.contains('red-theme')) {
                    // Switch back to default theme
                    body.classList.remove('red-theme');
                    localStorage.setItem('theme', 'default');
                } else {
                    // Switch to red theme
                    body.classList.add('red-theme');
                    localStorage.setItem('theme', 'red');
                }
        
                // Display a message about the theme change
                const themeMessage = body.classList.contains('red-theme') 
                    ? 'Red theme activated!' 
                    : 'Default theme restored!';
                
                // Create a temporary notification
                const notification = document.createElement('div');
                notification.style.position = 'fixed';
                notification.style.bottom = '100px';
                notification.style.right = '30px';
                notification.style.padding = '10px 20px';
                notification.style.backgroundColor = body.classList.contains('red-theme') ? '#d32f2f' : '#007BFF';
                notification.style.color = 'white';
                notification.style.borderRadius = '4px';
                notification.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
                notification.style.zIndex = '1001';
                notification.style.transition = 'opacity 0.5s ease';
                notification.textContent = themeMessage;
                
                document.body.appendChild(notification);
                
                // Remove notification after 2 seconds
                setTimeout(() => {
                    notification.style.opacity = '0';
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 500);
                }, 2000);
            });
        
            // Add a separate event for showing the medicine popup
            // Double click will now show the medicine popup
            themeToggleBtn.addEventListener('dblclick', function(event) {
                event.preventDefault(); // Prevent the single click from triggering
                medicinePopup.classList.add('active');
            });
        
            // Hide popup when clicking the close button
            closePopupBtn.addEventListener('click', function() {
                medicinePopup.classList.remove('active');
            });
        
            // Hide popup when clicking the close button in footer
            closePopupButton.addEventListener('click', function() {
                medicinePopup.classList.remove('active');
            });
        
            // View cart action (for demonstration)
            viewCartBtn.addEventListener('click', function() {
                alert('Cart feature coming soon!');
            });
        
            // Add to cart actions
            addToCartBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const medicineName = this.parentElement.querySelector('h4').textContent;
                    alert(`${medicineName} added to cart!`);
                    
                    // Change button text to "Added" temporarily
                    const originalText = this.textContent;
                    this.textContent = "Added";
                    this.disabled = true;
                    this.style.backgroundColor = "#4caf50";
                    
                    // Reset button after 2 seconds
                    setTimeout(() => {
                        this.textContent = originalText;
                        this.disabled = false;
                        this.style.backgroundColor = body.classList.contains('red-theme') ? "#b71c1c" : "#007BFF";
                    }, 2000);
                });
            });
        
            // Close popup when clicking outside the popup content
            medicinePopup.addEventListener('click', function(event) {
                if (event.target === medicinePopup) {
                    medicinePopup.classList.remove('active');
                }
            });
        });
    </script>
{% endblock %}